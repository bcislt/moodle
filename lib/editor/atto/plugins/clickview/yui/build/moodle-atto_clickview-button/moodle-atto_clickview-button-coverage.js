if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-atto_clickview-button/moodle-atto_clickview-button.js']) {
   __coverage__['build/moodle-atto_clickview-button/moodle-atto_clickview-button.js'] = {"path":"build/moodle-atto_clickview-button/moodle-atto_clickview-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":40},"end":{"line":1,"column":59}}},"2":{"name":"(anonymous_2)","line":3,"loc":{"start":{"line":3,"column":19},"end":{"line":3,"column":30}}},"3":{"name":"(anonymous_3)","line":11,"loc":{"start":{"line":11,"column":21},"end":{"line":11,"column":34}}},"4":{"name":"(anonymous_4)","line":14,"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":32}}},"5":{"name":"(anonymous_5)","line":17,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":34}}},"6":{"name":"(anonymous_6)","line":29,"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":45}}},"7":{"name":"(anonymous_7)","line":37,"loc":{"start":{"line":37,"column":23},"end":{"line":37,"column":35}}},"8":{"name":"(anonymous_8)","line":62,"loc":{"start":{"line":62,"column":24},"end":{"line":62,"column":54}}},"9":{"name":"(anonymous_9)","line":71,"loc":{"start":{"line":71,"column":45},"end":{"line":71,"column":59}}},"10":{"name":"(anonymous_10)","line":83,"loc":{"start":{"line":83,"column":26},"end":{"line":83,"column":45}}},"11":{"name":"(anonymous_11)","line":100,"loc":{"start":{"line":100,"column":33},"end":{"line":100,"column":50}}},"12":{"name":"(anonymous_12)","line":109,"loc":{"start":{"line":109,"column":24},"end":{"line":109,"column":48}}},"13":{"name":"(anonymous_13)","line":119,"loc":{"start":{"line":119,"column":33},"end":{"line":119,"column":50}}},"14":{"name":"CVEventsApi","line":131,"loc":{"start":{"line":131,"column":4},"end":{"line":131,"column":49}}},"15":{"name":"(anonymous_15)","line":158,"loc":{"start":{"line":158,"column":12},"end":{"line":158,"column":36}}},"16":{"name":"(anonymous_16)","line":161,"loc":{"start":{"line":161,"column":13},"end":{"line":161,"column":37}}},"17":{"name":"(anonymous_17)","line":164,"loc":{"start":{"line":164,"column":13},"end":{"line":164,"column":32}}},"18":{"name":"(anonymous_18)","line":167,"loc":{"start":{"line":167,"column":17},"end":{"line":167,"column":32}}},"19":{"name":"(anonymous_19)","line":177,"loc":{"start":{"line":177,"column":14},"end":{"line":177,"column":32}}},"20":{"name":"(anonymous_20)","line":192,"loc":{"start":{"line":192,"column":17},"end":{"line":192,"column":29}}},"21":{"name":"(anonymous_21)","line":204,"loc":{"start":{"line":204,"column":34},"end":{"line":204,"column":59}}},"22":{"name":"(anonymous_22)","line":211,"loc":{"start":{"line":211,"column":29},"end":{"line":211,"column":45}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":218,"column":61}},"2":{"start":{"line":3,"column":0},"end":{"line":173,"column":5}},"3":{"start":{"line":4,"column":4},"end":{"line":128,"column":10}},"4":{"start":{"line":12,"column":12},"end":{"line":12,"column":52}},"5":{"start":{"line":15,"column":12},"end":{"line":15,"column":26}},"6":{"start":{"line":18,"column":12},"end":{"line":18,"column":70}},"7":{"start":{"line":18,"column":63},"end":{"line":18,"column":70}},"8":{"start":{"line":20,"column":12},"end":{"line":25,"column":13}},"9":{"start":{"line":21,"column":16},"end":{"line":22,"column":51}},"10":{"start":{"line":24,"column":16},"end":{"line":24,"column":58}},"11":{"start":{"line":24,"column":47},"end":{"line":24,"column":58}},"12":{"start":{"line":30,"column":12},"end":{"line":30,"column":30}},"13":{"start":{"line":31,"column":12},"end":{"line":31,"column":24}},"14":{"start":{"line":33,"column":12},"end":{"line":33,"column":47}},"15":{"start":{"line":35,"column":12},"end":{"line":35,"column":68}},"16":{"start":{"line":38,"column":3},"end":{"line":39,"column":11}},"17":{"start":{"line":39,"column":4},"end":{"line":39,"column":11}},"18":{"start":{"line":41,"column":3},"end":{"line":41,"column":14}},"19":{"start":{"line":43,"column":3},"end":{"line":47,"column":4}},"20":{"start":{"line":44,"column":4},"end":{"line":44,"column":27}},"21":{"start":{"line":46,"column":4},"end":{"line":46,"column":11}},"22":{"start":{"line":49,"column":3},"end":{"line":50,"column":36}},"23":{"start":{"line":53,"column":12},"end":{"line":53,"column":43}},"24":{"start":{"line":53,"column":36},"end":{"line":53,"column":43}},"25":{"start":{"line":55,"column":12},"end":{"line":55,"column":41}},"26":{"start":{"line":58,"column":12},"end":{"line":58,"column":46}},"27":{"start":{"line":63,"column":12},"end":{"line":63,"column":52}},"28":{"start":{"line":63,"column":32},"end":{"line":63,"column":52}},"29":{"start":{"line":66,"column":12},"end":{"line":66,"column":39}},"30":{"start":{"line":66,"column":32},"end":{"line":66,"column":39}},"31":{"start":{"line":68,"column":12},"end":{"line":68,"column":48}},"32":{"start":{"line":68,"column":25},"end":{"line":68,"column":48}},"33":{"start":{"line":71,"column":12},"end":{"line":74,"column":15}},"34":{"start":{"line":72,"column":16},"end":{"line":73,"column":32}},"35":{"start":{"line":73,"column":20},"end":{"line":73,"column":32}},"36":{"start":{"line":77,"column":12},"end":{"line":78,"column":23}},"37":{"start":{"line":78,"column":16},"end":{"line":78,"column":23}},"38":{"start":{"line":81,"column":12},"end":{"line":81,"column":66}},"39":{"start":{"line":85,"column":12},"end":{"line":85,"column":33}},"40":{"start":{"line":85,"column":26},"end":{"line":85,"column":33}},"41":{"start":{"line":88,"column":12},"end":{"line":88,"column":29}},"42":{"start":{"line":88,"column":22},"end":{"line":88,"column":29}},"43":{"start":{"line":91,"column":12},"end":{"line":91,"column":39}},"44":{"start":{"line":91,"column":32},"end":{"line":91,"column":39}},"45":{"start":{"line":94,"column":12},"end":{"line":97,"column":13}},"46":{"start":{"line":95,"column":16},"end":{"line":95,"column":38}},"47":{"start":{"line":96,"column":16},"end":{"line":96,"column":23}},"48":{"start":{"line":100,"column":12},"end":{"line":104,"column":15}},"49":{"start":{"line":101,"column":16},"end":{"line":103,"column":17}},"50":{"start":{"line":102,"column":20},"end":{"line":102,"column":38}},"51":{"start":{"line":106,"column":12},"end":{"line":107,"column":38}},"52":{"start":{"line":107,"column":16},"end":{"line":107,"column":38}},"53":{"start":{"line":111,"column":12},"end":{"line":111,"column":33}},"54":{"start":{"line":111,"column":26},"end":{"line":111,"column":33}},"55":{"start":{"line":114,"column":12},"end":{"line":114,"column":29}},"56":{"start":{"line":114,"column":22},"end":{"line":114,"column":29}},"57":{"start":{"line":117,"column":12},"end":{"line":117,"column":39}},"58":{"start":{"line":117,"column":32},"end":{"line":117,"column":39}},"59":{"start":{"line":119,"column":12},"end":{"line":127,"column":15}},"60":{"start":{"line":120,"column":16},"end":{"line":123,"column":17}},"61":{"start":{"line":121,"column":20},"end":{"line":121,"column":35}},"62":{"start":{"line":122,"column":20},"end":{"line":122,"column":69}},"63":{"start":{"line":125,"column":4},"end":{"line":126,"column":23}},"64":{"start":{"line":126,"column":5},"end":{"line":126,"column":23}},"65":{"start":{"line":131,"column":4},"end":{"line":155,"column":5}},"66":{"start":{"line":132,"column":8},"end":{"line":132,"column":25}},"67":{"start":{"line":133,"column":2},"end":{"line":133,"column":31}},"68":{"start":{"line":135,"column":8},"end":{"line":135,"column":34}},"69":{"start":{"line":136,"column":8},"end":{"line":136,"column":33}},"70":{"start":{"line":137,"column":8},"end":{"line":137,"column":34}},"71":{"start":{"line":139,"column":8},"end":{"line":140,"column":51}},"72":{"start":{"line":140,"column":12},"end":{"line":140,"column":51}},"73":{"start":{"line":143,"column":8},"end":{"line":144,"column":63}},"74":{"start":{"line":144,"column":12},"end":{"line":144,"column":63}},"75":{"start":{"line":147,"column":8},"end":{"line":152,"column":60}},"76":{"start":{"line":148,"column":12},"end":{"line":148,"column":69}},"77":{"start":{"line":149,"column":13},"end":{"line":152,"column":60}},"78":{"start":{"line":150,"column":12},"end":{"line":150,"column":59}},"79":{"start":{"line":152,"column":12},"end":{"line":152,"column":60}},"80":{"start":{"line":154,"column":8},"end":{"line":154,"column":20}},"81":{"start":{"line":157,"column":4},"end":{"line":170,"column":6}},"82":{"start":{"line":159,"column":12},"end":{"line":159,"column":48}},"83":{"start":{"line":162,"column":12},"end":{"line":162,"column":47}},"84":{"start":{"line":165,"column":12},"end":{"line":165,"column":38}},"85":{"start":{"line":168,"column":12},"end":{"line":168,"column":84}},"86":{"start":{"line":172,"column":4},"end":{"line":172,"column":23}},"87":{"start":{"line":175,"column":0},"end":{"line":216,"column":3}},"88":{"start":{"line":178,"column":2},"end":{"line":178,"column":37}},"89":{"start":{"line":179,"column":2},"end":{"line":179,"column":41}},"90":{"start":{"line":180,"column":2},"end":{"line":180,"column":35}},"91":{"start":{"line":182,"column":2},"end":{"line":190,"column":3}},"92":{"start":{"line":183,"column":3},"end":{"line":189,"column":6}},"93":{"start":{"line":193,"column":2},"end":{"line":195,"column":5}},"94":{"start":{"line":196,"column":2},"end":{"line":196,"column":59}},"95":{"start":{"line":197,"column":2},"end":{"line":197,"column":232}},"96":{"start":{"line":199,"column":2},"end":{"line":199,"column":30}},"97":{"start":{"line":200,"column":2},"end":{"line":200,"column":18}},"98":{"start":{"line":202,"column":2},"end":{"line":202,"column":63}},"99":{"start":{"line":203,"column":2},"end":{"line":203,"column":61}},"100":{"start":{"line":204,"column":2},"end":{"line":209,"column":11}},"101":{"start":{"line":205,"column":3},"end":{"line":205,"column":52}},"102":{"start":{"line":206,"column":3},"end":{"line":206,"column":17}},"103":{"start":{"line":207,"column":3},"end":{"line":207,"column":36}},"104":{"start":{"line":208,"column":3},"end":{"line":208,"column":22}},"105":{"start":{"line":211,"column":2},"end":{"line":214,"column":5}},"106":{"start":{"line":212,"column":3},"end":{"line":212,"column":37}},"107":{"start":{"line":212,"column":30},"end":{"line":212,"column":37}},"108":{"start":{"line":213,"column":3},"end":{"line":213,"column":36}}},"branchMap":{"1":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":20},"end":{"line":12,"column":22}},{"start":{"line":12,"column":26},"end":{"line":12,"column":50}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":12}},{"start":{"line":18,"column":12},"end":{"line":18,"column":12}}]},"3":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":15},"end":{"line":18,"column":42}},{"start":{"line":18,"column":46},"end":{"line":18,"column":61}}]},"4":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":16},"end":{"line":24,"column":16}},{"start":{"line":24,"column":16},"end":{"line":24,"column":16}}]},"5":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":19},"end":{"line":30,"column":23}},{"start":{"line":30,"column":27},"end":{"line":30,"column":29}}]},"6":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":46},"end":{"line":35,"column":59}},{"start":{"line":35,"column":63},"end":{"line":35,"column":66}}]},"7":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":3},"end":{"line":38,"column":3}},{"start":{"line":38,"column":3},"end":{"line":38,"column":3}}]},"8":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":6},"end":{"line":38,"column":19}},{"start":{"line":38,"column":23},"end":{"line":38,"column":49}}]},"9":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":14},"end":{"line":49,"column":20}},{"start":{"line":49,"column":24},"end":{"line":49,"column":26}}]},"10":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":23},"end":{"line":50,"column":29}},{"start":{"line":50,"column":33},"end":{"line":50,"column":35}}]},"11":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":53,"column":12}},{"start":{"line":53,"column":12},"end":{"line":53,"column":12}}]},"12":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":12},"end":{"line":63,"column":12}},{"start":{"line":63,"column":12},"end":{"line":63,"column":12}}]},"13":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":12},"end":{"line":66,"column":12}},{"start":{"line":66,"column":12},"end":{"line":66,"column":12}}]},"14":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":68,"column":12}},{"start":{"line":68,"column":12},"end":{"line":68,"column":12}}]},"15":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":16},"end":{"line":72,"column":16}},{"start":{"line":72,"column":16},"end":{"line":72,"column":16}}]},"16":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":12},"end":{"line":77,"column":12}},{"start":{"line":77,"column":12},"end":{"line":77,"column":12}}]},"17":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":12}},{"start":{"line":85,"column":12},"end":{"line":85,"column":12}}]},"18":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":12}},{"start":{"line":88,"column":12},"end":{"line":88,"column":12}}]},"19":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":91,"column":12}},{"start":{"line":91,"column":12},"end":{"line":91,"column":12}}]},"20":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":12},"end":{"line":94,"column":12}},{"start":{"line":94,"column":12},"end":{"line":94,"column":12}}]},"21":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":16},"end":{"line":101,"column":16}},{"start":{"line":101,"column":16},"end":{"line":101,"column":16}}]},"22":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":12},"end":{"line":106,"column":12}},{"start":{"line":106,"column":12},"end":{"line":106,"column":12}}]},"23":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":12},"end":{"line":111,"column":12}},{"start":{"line":111,"column":12},"end":{"line":111,"column":12}}]},"24":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":12},"end":{"line":114,"column":12}},{"start":{"line":114,"column":12},"end":{"line":114,"column":12}}]},"25":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":12},"end":{"line":117,"column":12}},{"start":{"line":117,"column":12},"end":{"line":117,"column":12}}]},"26":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":16},"end":{"line":120,"column":16}},{"start":{"line":120,"column":16},"end":{"line":120,"column":16}}]},"27":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":33},"end":{"line":122,"column":40}},{"start":{"line":122,"column":44},"end":{"line":122,"column":48}}]},"28":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":4},"end":{"line":125,"column":4}},{"start":{"line":125,"column":4},"end":{"line":125,"column":4}}]},"29":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":8},"end":{"line":139,"column":8}},{"start":{"line":139,"column":8},"end":{"line":139,"column":8}}]},"30":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":143,"column":8}},{"start":{"line":143,"column":8},"end":{"line":143,"column":8}}]},"31":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":8},"end":{"line":147,"column":8}},{"start":{"line":147,"column":8},"end":{"line":147,"column":8}}]},"32":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":13},"end":{"line":149,"column":13}},{"start":{"line":149,"column":13},"end":{"line":149,"column":13}}]},"33":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":2},"end":{"line":182,"column":2}},{"start":{"line":182,"column":2},"end":{"line":182,"column":2}}]},"34":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":3},"end":{"line":212,"column":3}},{"start":{"line":212,"column":3},"end":{"line":212,"column":3}}]}},"code":["(function () { YUI.add('moodle-atto_clickview-button', function (Y, NAME) {","","var CVEventsApi = (function() {\r","    var VERSION = \"1.1.1\",\r","        handlers = {},\r","        guid = 1,\r","        _source = null,\r","\t\t_targetOrigin = null,\r","\r","    //Private methods\r","        isFunction = function(fn) {\r","            return (fn && typeof fn === 'function');\r","        },\r","        createGuid = function() {\r","            return guid++;\r","        },\r","        each = function(objs, fn) {\r","            if(typeof objs === 'undefined' || !isFunction(fn)) return;\r","\r","            for(var n = 0; n < objs.length; n++) {\r","                var obj = objs[n],\r","                    ret = fn.apply(objs, [obj, n]);\r","\r","                if(typeof ret !== 'undefined') return ret;\r","            }\r","        },\r","\r","    //Post message handlers\r","        sendEvent = function(el, type, data) {\r","            type = type || \"\";\r","            data = data;\r","\r","            var d = { type: type, data: data };\r","\r","            el.postMessage(JSON.stringify(d), _targetOrigin || \"*\");\r","        },\r","        receiveEvent = function(e) {\r","\t\t\tif(_targetOrigin && _targetOrigin !== e.origin)\r","\t\t\t\treturn;\r","\t\t\t\r","\t\t\tvar d = {};\r","\t\t\t\r","\t\t\ttry {\r","\t\t\t\td = JSON.parse(e.data);\t\r","\t\t\t} catch(e) {\r","\t\t\t\treturn;\r","\t\t\t}\r","            \r","\t\t\tvar data = d.data || {},\r","                type = d.type || \"\";\r","\r","            //Dont allow self triggering\r","            if(e.source == _source) return;\r","\r","            triggerEvents(type, data, e);\r","\r","            //Also trigger general message\r","            triggerEvents(\"message\", data, e);\r","        },\r","\r","    //on/off event handlers\r","        registerEvent = function(type, fn, once, ctx) {\r","            if(!handlers[type]) handlers[type] = [];\r","\r","            //function is not a function? how silly\r","            if(!isFunction(fn)) return;\r","\r","            if(!fn.guid) fn.guid = createGuid();\r","\r","            //Check if this fn is already registered\r","            var found = each(handlers[type], function(obj) {\r","                if(obj.fn.guid === fn.guid)\r","                    return true;\r","            });\r","\r","            //If we have a matching function above, return\r","            if(found)\r","                return;\r","\r","            //Add to the list of handlers\r","            handlers[type].push({fn: fn, once: !!once, ctx: ctx});\r","        },\r","        unregisterEvent = function(type, fn) {\r","            //If we have no handlers, we dont go to do nuff'n\r","            if(!handlers) return;\r","\r","            //We need a type of an event to unbind\r","            if(!type) return;\r","\r","            //We have no events for this type\r","            if(!handlers[type]) return;\r","\r","            //Remove all events for this type\r","            if(!isFunction(fn)) {\r","                delete handlers[type];\r","                return;\r","            }\r","\r","            //Remove a single event\r","            each(handlers[type], function(obj, i) {\r","                if(obj.fn.guid === fn.guid) {\r","                    this.splice(i, 1);\r","                }\r","            });\r","\r","            if(handlers[type].length === 0)\r","                delete handlers[type];\r","        },\r","        triggerEvents = function(type, data, e) {\r","            //If we have no handlers, we dont go to do nuff'n\r","            if(!handlers) return;\r","\r","            //We need a type of an event to unbind\r","            if(!type) return;\r","\r","            //We have no events for this type\r","            if(!handlers[type]) return;\r","\r","            each(handlers[type], function(obj, i) {\r","                if(isFunction(obj.fn)) {\r","                    var args = [e];\r","                    obj.fn.apply(obj.ctx || null, args.concat(data));\r","                }\r","\t\t\t\t\r","\t\t\t\tif(obj.once)\r","\t\t\t\t\tthis.splice(i, 1);\r","            });\r","        };\r","\r","\r","    function CVEventsApi(targetEl, targetOrigin) {\r","        _source = window;\r","\t\t_targetOrigin = targetOrigin;\r","\t\t\r","        this._target   = targetEl;\r","        this._version  = VERSION;\r","        this._handlers = handlers;\r","\r","        if(!this._target)\r","            throw new Error(\"No target specified\");\r","\r","        //Verify\r","        if(!this._target.postMessage)\r","            throw new Error(\"Target element is not supported\");\r","\r","        //Setup event handler\r","        if(_source.addEventListener)\r","            _source.addEventListener(\"message\", receiveEvent, false);\r","        else if(_source.attachEvent)\r","            _source.attachEvent(\"onmessage\", receiveEvent);\r","        else\r","            throw new Error(\"Cannot attach event listener\");\r","\r","        return this;\r","    }\r","\r","    CVEventsApi.prototype = {\r","        on: function(type, fn, ctx) {\r","            registerEvent(type, fn, false, ctx);\r","        },\r","        one: function(type, fn, ctx) {\r","            registerEvent(type, fn, true, ctx);\r","        },\r","        off: function(type, fn) {\r","            unregisterEvent(type, fn);\r","        },\r","        trigger: function(type) {\r","            sendEvent(this._target, type, Array.prototype.slice.call(arguments, 1));\r","        },\r","    };\r","\r","    return CVEventsApi;\r","})();\r","\r","Y.namespace(\"M.atto_clickview\").Button = Y.Base.create(\"button\", Y.M.editor_atto.EditorPlugin, [], {\r","\tname: 'ClickView Plugin for Atto',\r","\tinitializer: function (params) {\r","\t\tthis._onlineUrl = params.onlineUrl;\r","\t\tthis._consumerKey = params.consumerKey;\r","\t\tthis._schoolId = params.schoolId;\r","\t\t\r","\t\tif(params.allowIframe){\r","\t\t\tthis.addButton({\r","\t\t\t\tcallback: this._displayDialog,\r","\t\t\t\ticonurl: 'https://' + this._onlineUrl + '/Assets/images/icons/cv-logo.png',\r","\t\t\t\ttags: 'iframe',\r","\t\t\t\ticon: 'clickview',\r","\t\t\t\ticonComponent: 'atto_clickview'\r","\t\t\t});\r","\t\t}\r","\t},\r","\t_displayDialog: function () {\r","\t\tvar dialog = this.getDialogue({\r","\t\t\twidth: '824px'\r","\t\t});\r","\t\tdialog.set('headerContent', 'ClickView Plugin for Atto');\r","\t\tdialog.set('bodyContent', '<iframe id=\"cv-plugin-frame\" src=\"' + this._onlineUrl + '/v3/plugins/base?consumerKey=' + this._consumerKey +'&schoolId=' + this._schoolId +'\" width=\"800\" height=\"494\" frameborder=\"0\"></iframe>').show();\r","\t\t\r","\t\tvar host = this.get('host');\r","\t\tvar self = this;\r","\r","\t\tvar pluginFrame = document.getElementById('cv-plugin-frame');\r","\t\tvar eventsApi = new CVEventsApi(pluginFrame.contentWindow);\r","\t\teventsApi.on('cv-lms-addvideo', function (event, detail) {\r","\t\t\thost.insertContentAtFocusPoint(detail.embedHtml);\r","\t\t\tdialog.hide();\r","\t\t\teventsApi.off('cv-lms-addvideo');\r","\t\t\tself.markUpdated();\r","\t\t}, true);\r","\t\t\r","\t\tdialog.on('visibleChange', function(event) {\r","\t\t\tif(event.newVal !== false) return;\r","\t\t\teventsApi.off('cv-lms-addvideo');\r","\t\t});\r","\t}\r","});","","}, '@VERSION@', {\"requires\": [\"moodle-editor_atto-plugin\"]});","","}());"]};
}
var __cov_zsMamlOjReNSjrHmV639Mg = __coverage__['build/moodle-atto_clickview-button/moodle-atto_clickview-button.js'];
__cov_zsMamlOjReNSjrHmV639Mg.s['1']++;YUI.add('moodle-atto_clickview-button',function(Y,NAME){__cov_zsMamlOjReNSjrHmV639Mg.f['1']++;__cov_zsMamlOjReNSjrHmV639Mg.s['2']++;var CVEventsApi=function(){__cov_zsMamlOjReNSjrHmV639Mg.f['2']++;__cov_zsMamlOjReNSjrHmV639Mg.s['3']++;var VERSION='1.1.1',handlers={},guid=1,_source=null,_targetOrigin=null,isFunction=function(fn){__cov_zsMamlOjReNSjrHmV639Mg.f['3']++;__cov_zsMamlOjReNSjrHmV639Mg.s['4']++;return(__cov_zsMamlOjReNSjrHmV639Mg.b['1'][0]++,fn)&&(__cov_zsMamlOjReNSjrHmV639Mg.b['1'][1]++,typeof fn==='function');},createGuid=function(){__cov_zsMamlOjReNSjrHmV639Mg.f['4']++;__cov_zsMamlOjReNSjrHmV639Mg.s['5']++;return guid++;},each=function(objs,fn){__cov_zsMamlOjReNSjrHmV639Mg.f['5']++;__cov_zsMamlOjReNSjrHmV639Mg.s['6']++;if((__cov_zsMamlOjReNSjrHmV639Mg.b['3'][0]++,typeof objs==='undefined')||(__cov_zsMamlOjReNSjrHmV639Mg.b['3'][1]++,!isFunction(fn))){__cov_zsMamlOjReNSjrHmV639Mg.b['2'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['7']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['2'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['8']++;for(var n=0;n<objs.length;n++){__cov_zsMamlOjReNSjrHmV639Mg.s['9']++;var obj=objs[n],ret=fn.apply(objs,[obj,n]);__cov_zsMamlOjReNSjrHmV639Mg.s['10']++;if(typeof ret!=='undefined'){__cov_zsMamlOjReNSjrHmV639Mg.b['4'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['11']++;return ret;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['4'][1]++;}}},sendEvent=function(el,type,data){__cov_zsMamlOjReNSjrHmV639Mg.f['6']++;__cov_zsMamlOjReNSjrHmV639Mg.s['12']++;type=(__cov_zsMamlOjReNSjrHmV639Mg.b['5'][0]++,type)||(__cov_zsMamlOjReNSjrHmV639Mg.b['5'][1]++,'');__cov_zsMamlOjReNSjrHmV639Mg.s['13']++;data=data;__cov_zsMamlOjReNSjrHmV639Mg.s['14']++;var d={type:type,data:data};__cov_zsMamlOjReNSjrHmV639Mg.s['15']++;el.postMessage(JSON.stringify(d),(__cov_zsMamlOjReNSjrHmV639Mg.b['6'][0]++,_targetOrigin)||(__cov_zsMamlOjReNSjrHmV639Mg.b['6'][1]++,'*'));},receiveEvent=function(e){__cov_zsMamlOjReNSjrHmV639Mg.f['7']++;__cov_zsMamlOjReNSjrHmV639Mg.s['16']++;if((__cov_zsMamlOjReNSjrHmV639Mg.b['8'][0]++,_targetOrigin)&&(__cov_zsMamlOjReNSjrHmV639Mg.b['8'][1]++,_targetOrigin!==e.origin)){__cov_zsMamlOjReNSjrHmV639Mg.b['7'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['17']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['7'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['18']++;var d={};__cov_zsMamlOjReNSjrHmV639Mg.s['19']++;try{__cov_zsMamlOjReNSjrHmV639Mg.s['20']++;d=JSON.parse(e.data);}catch(e){__cov_zsMamlOjReNSjrHmV639Mg.s['21']++;return;}__cov_zsMamlOjReNSjrHmV639Mg.s['22']++;var data=(__cov_zsMamlOjReNSjrHmV639Mg.b['9'][0]++,d.data)||(__cov_zsMamlOjReNSjrHmV639Mg.b['9'][1]++,{}),type=(__cov_zsMamlOjReNSjrHmV639Mg.b['10'][0]++,d.type)||(__cov_zsMamlOjReNSjrHmV639Mg.b['10'][1]++,'');__cov_zsMamlOjReNSjrHmV639Mg.s['23']++;if(e.source==_source){__cov_zsMamlOjReNSjrHmV639Mg.b['11'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['24']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['11'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['25']++;triggerEvents(type,data,e);__cov_zsMamlOjReNSjrHmV639Mg.s['26']++;triggerEvents('message',data,e);},registerEvent=function(type,fn,once,ctx){__cov_zsMamlOjReNSjrHmV639Mg.f['8']++;__cov_zsMamlOjReNSjrHmV639Mg.s['27']++;if(!handlers[type]){__cov_zsMamlOjReNSjrHmV639Mg.b['12'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['28']++;handlers[type]=[];}else{__cov_zsMamlOjReNSjrHmV639Mg.b['12'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['29']++;if(!isFunction(fn)){__cov_zsMamlOjReNSjrHmV639Mg.b['13'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['30']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['13'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['31']++;if(!fn.guid){__cov_zsMamlOjReNSjrHmV639Mg.b['14'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['32']++;fn.guid=createGuid();}else{__cov_zsMamlOjReNSjrHmV639Mg.b['14'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['33']++;var found=each(handlers[type],function(obj){__cov_zsMamlOjReNSjrHmV639Mg.f['9']++;__cov_zsMamlOjReNSjrHmV639Mg.s['34']++;if(obj.fn.guid===fn.guid){__cov_zsMamlOjReNSjrHmV639Mg.b['15'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['35']++;return true;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['15'][1]++;}});__cov_zsMamlOjReNSjrHmV639Mg.s['36']++;if(found){__cov_zsMamlOjReNSjrHmV639Mg.b['16'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['37']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['16'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['38']++;handlers[type].push({fn:fn,once:!!once,ctx:ctx});},unregisterEvent=function(type,fn){__cov_zsMamlOjReNSjrHmV639Mg.f['10']++;__cov_zsMamlOjReNSjrHmV639Mg.s['39']++;if(!handlers){__cov_zsMamlOjReNSjrHmV639Mg.b['17'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['40']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['17'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['41']++;if(!type){__cov_zsMamlOjReNSjrHmV639Mg.b['18'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['42']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['18'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['43']++;if(!handlers[type]){__cov_zsMamlOjReNSjrHmV639Mg.b['19'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['44']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['19'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['45']++;if(!isFunction(fn)){__cov_zsMamlOjReNSjrHmV639Mg.b['20'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['46']++;delete handlers[type];__cov_zsMamlOjReNSjrHmV639Mg.s['47']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['20'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['48']++;each(handlers[type],function(obj,i){__cov_zsMamlOjReNSjrHmV639Mg.f['11']++;__cov_zsMamlOjReNSjrHmV639Mg.s['49']++;if(obj.fn.guid===fn.guid){__cov_zsMamlOjReNSjrHmV639Mg.b['21'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['50']++;this.splice(i,1);}else{__cov_zsMamlOjReNSjrHmV639Mg.b['21'][1]++;}});__cov_zsMamlOjReNSjrHmV639Mg.s['51']++;if(handlers[type].length===0){__cov_zsMamlOjReNSjrHmV639Mg.b['22'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['52']++;delete handlers[type];}else{__cov_zsMamlOjReNSjrHmV639Mg.b['22'][1]++;}},triggerEvents=function(type,data,e){__cov_zsMamlOjReNSjrHmV639Mg.f['12']++;__cov_zsMamlOjReNSjrHmV639Mg.s['53']++;if(!handlers){__cov_zsMamlOjReNSjrHmV639Mg.b['23'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['54']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['23'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['55']++;if(!type){__cov_zsMamlOjReNSjrHmV639Mg.b['24'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['56']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['24'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['57']++;if(!handlers[type]){__cov_zsMamlOjReNSjrHmV639Mg.b['25'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['58']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['25'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['59']++;each(handlers[type],function(obj,i){__cov_zsMamlOjReNSjrHmV639Mg.f['13']++;__cov_zsMamlOjReNSjrHmV639Mg.s['60']++;if(isFunction(obj.fn)){__cov_zsMamlOjReNSjrHmV639Mg.b['26'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['61']++;var args=[e];__cov_zsMamlOjReNSjrHmV639Mg.s['62']++;obj.fn.apply((__cov_zsMamlOjReNSjrHmV639Mg.b['27'][0]++,obj.ctx)||(__cov_zsMamlOjReNSjrHmV639Mg.b['27'][1]++,null),args.concat(data));}else{__cov_zsMamlOjReNSjrHmV639Mg.b['26'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['63']++;if(obj.once){__cov_zsMamlOjReNSjrHmV639Mg.b['28'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['64']++;this.splice(i,1);}else{__cov_zsMamlOjReNSjrHmV639Mg.b['28'][1]++;}});};__cov_zsMamlOjReNSjrHmV639Mg.s['65']++;function CVEventsApi(targetEl,targetOrigin){__cov_zsMamlOjReNSjrHmV639Mg.f['14']++;__cov_zsMamlOjReNSjrHmV639Mg.s['66']++;_source=window;__cov_zsMamlOjReNSjrHmV639Mg.s['67']++;_targetOrigin=targetOrigin;__cov_zsMamlOjReNSjrHmV639Mg.s['68']++;this._target=targetEl;__cov_zsMamlOjReNSjrHmV639Mg.s['69']++;this._version=VERSION;__cov_zsMamlOjReNSjrHmV639Mg.s['70']++;this._handlers=handlers;__cov_zsMamlOjReNSjrHmV639Mg.s['71']++;if(!this._target){__cov_zsMamlOjReNSjrHmV639Mg.b['29'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['72']++;throw new Error('No target specified');}else{__cov_zsMamlOjReNSjrHmV639Mg.b['29'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['73']++;if(!this._target.postMessage){__cov_zsMamlOjReNSjrHmV639Mg.b['30'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['74']++;throw new Error('Target element is not supported');}else{__cov_zsMamlOjReNSjrHmV639Mg.b['30'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['75']++;if(_source.addEventListener){__cov_zsMamlOjReNSjrHmV639Mg.b['31'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['76']++;_source.addEventListener('message',receiveEvent,false);}else{__cov_zsMamlOjReNSjrHmV639Mg.b['31'][1]++;__cov_zsMamlOjReNSjrHmV639Mg.s['77']++;if(_source.attachEvent){__cov_zsMamlOjReNSjrHmV639Mg.b['32'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['78']++;_source.attachEvent('onmessage',receiveEvent);}else{__cov_zsMamlOjReNSjrHmV639Mg.b['32'][1]++;__cov_zsMamlOjReNSjrHmV639Mg.s['79']++;throw new Error('Cannot attach event listener');}}__cov_zsMamlOjReNSjrHmV639Mg.s['80']++;return this;}__cov_zsMamlOjReNSjrHmV639Mg.s['81']++;CVEventsApi.prototype={on:function(type,fn,ctx){__cov_zsMamlOjReNSjrHmV639Mg.f['15']++;__cov_zsMamlOjReNSjrHmV639Mg.s['82']++;registerEvent(type,fn,false,ctx);},one:function(type,fn,ctx){__cov_zsMamlOjReNSjrHmV639Mg.f['16']++;__cov_zsMamlOjReNSjrHmV639Mg.s['83']++;registerEvent(type,fn,true,ctx);},off:function(type,fn){__cov_zsMamlOjReNSjrHmV639Mg.f['17']++;__cov_zsMamlOjReNSjrHmV639Mg.s['84']++;unregisterEvent(type,fn);},trigger:function(type){__cov_zsMamlOjReNSjrHmV639Mg.f['18']++;__cov_zsMamlOjReNSjrHmV639Mg.s['85']++;sendEvent(this._target,type,Array.prototype.slice.call(arguments,1));}};__cov_zsMamlOjReNSjrHmV639Mg.s['86']++;return CVEventsApi;}();__cov_zsMamlOjReNSjrHmV639Mg.s['87']++;Y.namespace('M.atto_clickview').Button=Y.Base.create('button',Y.M.editor_atto.EditorPlugin,[],{name:'ClickView Plugin for Atto',initializer:function(params){__cov_zsMamlOjReNSjrHmV639Mg.f['19']++;__cov_zsMamlOjReNSjrHmV639Mg.s['88']++;this._onlineUrl=params.onlineUrl;__cov_zsMamlOjReNSjrHmV639Mg.s['89']++;this._consumerKey=params.consumerKey;__cov_zsMamlOjReNSjrHmV639Mg.s['90']++;this._schoolId=params.schoolId;__cov_zsMamlOjReNSjrHmV639Mg.s['91']++;if(params.allowIframe){__cov_zsMamlOjReNSjrHmV639Mg.b['33'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['92']++;this.addButton({callback:this._displayDialog,iconurl:'https://'+this._onlineUrl+'/Assets/images/icons/cv-logo.png',tags:'iframe',icon:'clickview',iconComponent:'atto_clickview'});}else{__cov_zsMamlOjReNSjrHmV639Mg.b['33'][1]++;}},_displayDialog:function(){__cov_zsMamlOjReNSjrHmV639Mg.f['20']++;__cov_zsMamlOjReNSjrHmV639Mg.s['93']++;var dialog=this.getDialogue({width:'824px'});__cov_zsMamlOjReNSjrHmV639Mg.s['94']++;dialog.set('headerContent','ClickView Plugin for Atto');__cov_zsMamlOjReNSjrHmV639Mg.s['95']++;dialog.set('bodyContent','<iframe id="cv-plugin-frame" src="'+this._onlineUrl+'/v3/plugins/base?consumerKey='+this._consumerKey+'&schoolId='+this._schoolId+'" width="800" height="494" frameborder="0"></iframe>').show();__cov_zsMamlOjReNSjrHmV639Mg.s['96']++;var host=this.get('host');__cov_zsMamlOjReNSjrHmV639Mg.s['97']++;var self=this;__cov_zsMamlOjReNSjrHmV639Mg.s['98']++;var pluginFrame=document.getElementById('cv-plugin-frame');__cov_zsMamlOjReNSjrHmV639Mg.s['99']++;var eventsApi=new CVEventsApi(pluginFrame.contentWindow);__cov_zsMamlOjReNSjrHmV639Mg.s['100']++;eventsApi.on('cv-lms-addvideo',function(event,detail){__cov_zsMamlOjReNSjrHmV639Mg.f['21']++;__cov_zsMamlOjReNSjrHmV639Mg.s['101']++;host.insertContentAtFocusPoint(detail.embedHtml);__cov_zsMamlOjReNSjrHmV639Mg.s['102']++;dialog.hide();__cov_zsMamlOjReNSjrHmV639Mg.s['103']++;eventsApi.off('cv-lms-addvideo');__cov_zsMamlOjReNSjrHmV639Mg.s['104']++;self.markUpdated();},true);__cov_zsMamlOjReNSjrHmV639Mg.s['105']++;dialog.on('visibleChange',function(event){__cov_zsMamlOjReNSjrHmV639Mg.f['22']++;__cov_zsMamlOjReNSjrHmV639Mg.s['106']++;if(event.newVal!==false){__cov_zsMamlOjReNSjrHmV639Mg.b['34'][0]++;__cov_zsMamlOjReNSjrHmV639Mg.s['107']++;return;}else{__cov_zsMamlOjReNSjrHmV639Mg.b['34'][1]++;}__cov_zsMamlOjReNSjrHmV639Mg.s['108']++;eventsApi.off('cv-lms-addvideo');});}});},'@VERSION@',{'requires':['moodle-editor_atto-plugin']});
